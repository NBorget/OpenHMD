#include <stdlib.h>
#include <stdio.h>

#include "rift.h"

static rift_led test_leds[] = {
  { .pos = {{63321.000000,-31734.000000,67534.000000}}, .dir={{0.181956,-0.102972,0.977900}}, .pattern=0x1 },
  { .pos = {{77003.000000,1460.000000,65643.000000}}, .dir={{0.299055,0.001984,0.954234}}, .pattern=0x6 },
  { .pos = {{29006.000000,-19167.000000,73205.000000}}, .dir={{0.082983,-0.096960,0.991823}}, .pattern=0x1a },
  { .pos = {{-92.000000,-33409.000000,72387.000000}}, .dir={{0.000000,-0.188028,0.982164}}, .pattern=0x1d },
  { .pos = {{-29277.000000,-19280.000000,73313.000000}}, .dir={{-0.082983,-0.096960,0.991823}}, .pattern=0x28 },
  { .pos = {{-63317.000000,-32109.000000,67604.000000}}, .dir={{-0.181956,-0.102972,0.977900}}, .pattern=0x2f },
  { .pos = {{-77328.000000,974.000000,65640.000000}}, .dir={{-0.299055,0.001984,0.954234}}, .pattern=0x33 },
  { .pos = {{-54084.000000,34504.000000,68768.000000}}, .dir={{-0.140969,0.134957,0.980772}}, .pattern=0x4b },
  { .pos = {{-20154.000000,17780.000000,74139.000000}}, .dir={{-0.056979,0.095951,0.993754}}, .pattern=0x4c },
  { .pos = {{53480.000000,34724.000000,68953.000000}}, .dir={{0.140969,0.134957,0.980772}}, .pattern=0x57 },
  { .pos = {{19668.000000,17820.000000,74205.000000}}, .dir={{0.056979,0.095951,0.993754}}, .pattern=0x62 },
  { .pos = {{-78986.000000,-12270.000000,28013.000000}}, .dir={{-0.993057,-0.099980,-0.061984}}, .pattern=0x65 },
  { .pos = {{-77680.000000,-12236.000000,-8572.000000}}, .dir={{-0.981566,-0.188915,-0.028963}}, .pattern=0x79 },
  { .pos = {{-70629.000000,-31636.000000,9905.000000}}, .dir={{-0.734056,-0.668042,-0.121987}}, .pattern=0x7e },
  { .pos = {{-58930.000000,-40868.000000,36014.000000}}, .dir={{-0.153997,-0.983099,-0.099003}}, .pattern=0x90 },
  { .pos = {{59269.000000,-40973.000000,36524.000000}}, .dir={{0.153997,-0.983099,-0.099003}}, .pattern=0xa4 },
  { .pos = {{28475.000000,-43555.000000,61577.000000}}, .dir={{-0.004975,-0.998636,-0.051974}}, .pattern=0x114 },
  { .pos = {{-80405.000000,-24558.000000,53251.000000}}, .dir={{-0.947594,-0.225904,-0.225904}}, .pattern=0x151 },
  { .pos = {{-27802.000000,-43408.000000,61279.000000}}, .dir={{0.004975,-0.998636,-0.051974}}, .pattern=0x183 },
  { .pos = {{70969.000000,-31734.000000,10382.000000}}, .dir={{0.734056,-0.668042,-0.121987}}, .pattern=0x18c },
  { .pos = {{77642.000000,-12844.000000,-8764.000000}}, .dir={{0.981566,-0.188915,-0.028963}}, .pattern=0x199 },
  { .pos = {{79166.000000,-12197.000000,28124.000000}}, .dir={{0.993057,-0.099980,-0.061984}}, .pattern=0x1aa },
  { .pos = {{80537.000000,-24730.000000,53440.000000}}, .dir={{0.947594,-0.225904,-0.225904}}, .pattern=0x1b5 },
  { .pos = {{-28909.000000,43724.000000,57823.000000}}, .dir={{-0.004975,0.999980,0.003998}}, .pattern=0x1c0 },
  { .pos = {{-78119.000000,29616.000000,53275.000000}}, .dir={{-0.871752,0.428856,-0.236921}}, .pattern=0x1cf },
  { .pos = {{72085.000000,30581.000000,46.000000}}, .dir={{0.816019,0.577024,-0.033998}}, .pattern=0x1d6 },
  { .pos = {{66860.000000,37604.000000,29608.000000}}, .dir={{0.526908,0.847875,-0.058962}}, .pattern=0x1e9 },
  { .pos = {{78145.000000,29213.000000,52728.000000}}, .dir={{0.871752,0.428856,-0.236921}}, .pattern=0x1f3 },
  { .pos = {{29098.000000,43572.000000,57637.000000}}, .dir={{0.004975,0.999980,0.003998}}, .pattern=0x1fc },
  { .pos = {{-66825.000000,37894.000000,30136.000000}}, .dir={{-0.526908,0.847875,-0.058962}}, .pattern=0x230 },
  { .pos = {{-72217.000000,30765.000000,462.000000}}, .dir={{-0.816019,0.577024,-0.033998}}, .pattern=0x252 },
  { .pos = {{-41038.000000,43365.000000,23723.000000}}, .dir={{-0.041995,0.999110,-0.003998}}, .pattern=0x282 },
  { .pos = {{3.000000,43958.000000,33539.000000}}, .dir={{0.005982,0.999932,0.009980}}, .pattern=0x285 },
  { .pos = {{41065.000000,43154.000000,23442.000000}}, .dir={{0.041995,0.999110,-0.003998}}, .pattern=0x29b },
  { .pos = {{-11850.000000,25964.000000,-164021.000000}}, .dir={{-0.208077,0.144049,-0.967447}}, .pattern=0x29c },
  { .pos = {{-24139.000000,7160.000000,-160920.000000}}, .dir={{-0.421008,-0.007996,-0.907022}}, .pattern=0x2ae },
  { .pos = {{-32821.000000,-11851.000000,-153895.000000}}, .dir={{-0.493130,-0.214031,-0.843216}}, .pattern=0x2b7 },
  { .pos = {{-40456.000000,-31212.000000,-140108.000000}}, .dir={{-0.505856,-0.473871,-0.720802}}, .pattern=0x2c8 },
  { .pos = {{-15097.000000,-42169.000000,-142923.000000}}, .dir={{-0.147928,-0.689771,-0.708754}}, .pattern=0x2d1 },
  { .pos = {{14884.000000,-42172.000000,-142921.000000}}, .dir={{0.147928,-0.689771,-0.708754}}, .pattern=0x2e3 },
  { .pos = {{40417.000000,-31186.000000,-139999.000000}}, .dir={{0.505856,-0.473871,-0.720802}}, .pattern=0x2ed },
  { .pos = {{33046.000000,-11639.000000,-153922.000000}}, .dir={{0.493130,-0.214031,-0.843216}}, .pattern=0x2fa },
  { .pos = {{24183.000000,7138.000000,-161111.000000}}, .dir={{0.421008,-0.007996,-0.907022}}, .pattern=0x307 },
  { .pos = {{11832.000000,25969.000000,-164177.000000}}, .dir={{0.208077,0.144049,-0.967447}}, .pattern=0x309 },
};

void
rift_leds_init (rift_leds *leds, uint8_t num_points)
{
	(void)(num_points);
        leds->points = test_leds; //calloc(num_points, sizeof(rift_led));
        leds->num_points = sizeof (test_leds) / sizeof (test_leds[0]);
}

void
rift_leds_dump (rift_leds *leds, const char *desc)
{
        int i;
        printf ("LED model: %s\n", desc);
        for (i = 0; i < leds->num_points; i++) {
                rift_led *p = leds->points + i;
                printf ("%f;%f;%f;%f;%f;%f;255;255;0;1.0\n",
                    p->pos.x, p->pos.y, p->pos.z,
                    p->dir.x, p->dir.y, p->dir.z);
        }
}

void
rift_leds_clear (rift_leds *leds)
{
        //free (leds->points);
        leds->points = NULL;
}

